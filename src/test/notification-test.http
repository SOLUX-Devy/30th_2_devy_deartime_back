### ===================================================
### 알림 API 테스트 (REST API)
### ===================================================
### WebSocket/STOMP 테스트는 notification-websocket-test.html 파일 사용

### 1. 친구 요청 API 테스트 (User 1 -> User 2에게 요청)
// 이 요청을 실행하면 User 2가 웹소켓으로 알림을 받습니다.
POST http://localhost:8080/api/friends/request/2
Content-Type: application/json
Authorization: Bearer {{user1_token}}

###

### 2. 알림 목록 조회 (User 2)
GET http://localhost:8080/api/notifications?page=0&size=10
Content-Type: application/json
Authorization: Bearer {{user2_token}}

###

### 3. 읽지 않은 알림 개수 조회 (User 2)
GET http://localhost:8080/api/notifications/unread-count
Content-Type: application/json
Authorization: Bearer {{user2_token}}

###

### 4. 특정 알림 읽음 처리 (User 2)
PATCH http://localhost:8080/api/notifications/1/read
Content-Type: application/json
Authorization: Bearer {{user2_token}}

###

### 5. 모든 알림 삭제 (User 2)
DELETE http://localhost:8080/api/notifications
Content-Type: application/json
Authorization: Bearer {{user2_token}}

###

### 6. 친구 요청 수락 (User 2가 User 1의 요청 수락)
POST http://localhost:8080/api/friends/accept/1
Content-Type: application/json
Authorization: Bearer {{user2_token}}

###

### 7. 편지 전송 테스트 (User 1 -> User 2)
POST http://localhost:8080/api/letters
Content-Type: application/json
Authorization: Bearer {{user1_token}}

{
  "receiverId": 2,
  "title": "테스트 편지",
  "content": "안녕하세요! 테스트 편지입니다.",
  "theme": "DEFAULT"
}

###

### 8. 타임캡슐 전송 테스트 (User 1 -> User 2)
// CAPSULE_RECEIVED 알림이 생성되며, contentTitle에 캡슐 제목이 포함됩니다.
POST http://localhost:8080/api/timecapsules
Content-Type: application/json
Authorization: Bearer {{user1_token}}

{
  "receiverId": 2,
  "title": "1년 후의 너에게",
  "content": "1년 후에 이 캡슐을 열어봐!",
  "theme": "DEFAULT",
  "openAt": "2026-12-31T00:00:00"
}

###

### 9. 타임캡슐 전송 (즉시 오픈 - 스케줄러 테스트용)
// openAt을 과거 시간으로 설정하면 스케줄러가 1분 내에 CAPSULE_OPENED 알림을 발송합니다.
POST http://localhost:8080/api/timecapsules
Content-Type: application/json
Authorization: Bearer {{user1_token}}

{
  "receiverId": 2,
  "title": "지금 바로 열어봐!",
  "content": "즉시 오픈 테스트용 캡슐입니다.",
  "theme": "DEFAULT",
  "openAt": "2024-01-01T00:00:00"
}

###

